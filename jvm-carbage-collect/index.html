<!DOCTYPE html><html lang="ja、zh-CN、zh-HK、zh-TW、en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="冴羽　逸秋" href="https://blog.issyuu.com/rss.xml"><link rel="alternate" type="application/atom+xml" title="冴羽　逸秋" href="https://blog.issyuu.com/atom.xml"><link rel="alternate" type="application/json" title="冴羽　逸秋" href="https://blog.issyuu.com/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="Java,Jvm"><link rel="canonical" href="https://blog.issyuu.com/jvm-carbage-collect/"><title>Jvm 垃圾回收 - Jvm - Java - 技术 | 湖心小筑 = 冴羽　逸秋 = 欲を捨てて、今を生きる！</title><meta name="generator" content="Hexo 5.4.2"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">Jvm 垃圾回收</h1><div class="meta"><span class="item" title="Created: 2019-12-15 00:00:00"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">Posted on</span> <time itemprop="dateCreated datePublished" datetime="2019-12-15T00:00:00+09:00">2019-12-15</time> </span><span class="item" title="Symbols count in article"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">Symbols count in article</span> <span>13k</span> <span class="text">words</span> </span><span class="item" title="Reading time"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">Reading time</span> <span>12 mins.</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="Toggle navigation bar"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">湖心小筑</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://cdn.jsdelivr.net/gh/smile-lxy/resources@latest/images/random/dd21608b40c2387068c472909a82b3e0.md.jpg"></li><li class="item" data-background-image="https://cdn.jsdelivr.net/gh/smile-lxy/resources@latest/images/random/68fb5832b107119e9f351a83be51ed2f.md.jpg"></li><li class="item" data-background-image="https://cdn.jsdelivr.net/gh/smile-lxy/resources@latest/images/random/626f157a4ff74c7984f4110e38031524.md.jpg"></li><li class="item" data-background-image="https://cdn.jsdelivr.net/gh/smile-lxy/resources@latest/images/random/de8e4ab9f6942742165c7e05ff1e1f4f.md.jpg"></li><li class="item" data-background-image="https://cdn.jsdelivr.net/gh/smile-lxy/resources@latest/images/random/23cf61d58eb87957accaa99d3afc1183.md.jpg"></li><li class="item" data-background-image="https://cdn.jsdelivr.net/gh/smile-lxy/resources@latest/images/random/62d006663966c7ffbe93715d7d26acae.md.jpg"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">Home</a></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/%E6%8A%80%E6%9C%AF/" itemprop="item" rel="index" title="In 技术"><span itemprop="name">技术</span></a><meta itemprop="position" content="1"></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/%E6%8A%80%E6%9C%AF/Java/" itemprop="item" rel="index" title="In Java"><span itemprop="name">Java</span></a><meta itemprop="position" content="2"></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/%E6%8A%80%E6%9C%AF/Java/Jvm/" itemprop="item" rel="index" title="In Jvm"><span itemprop="name">Jvm</span></a><meta itemprop="position" content="3"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="ja、zh-CN、zh-HK、zh-TW、en"><link itemprop="mainEntityOfPage" href="https://blog.issyuu.com/jvm-carbage-collect/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="冴羽　逸秋"><meta itemprop="description" content="欲を捨てて、今を生きる！, 欲を捨てて、今を生きる！"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="冴羽　逸秋"></span><div class="body md" itemprop="articleBody"><ul><li>系统在运行的过程中，会创建许许多多的对象，这些对象会经历生老死的历程，而那些 ' 死' 的对象需要进行回收为新生对象提供空间.<br><span id="more"></span></li></ul><h3 id="前言"><a class="anchor" href="#前言">#</a> 前言</h3><ul><li>系统在运行的过程中，会创建许许多多的对象，这些对象会经历生老死的历程，而那些 ' 死' 的对象需要进行回收为新生对象提供空间.</li></ul><h3 id="回收算法"><a class="anchor" href="#回收算法">#</a> 回收算法</h3><h4 id="引用计数算法"><a class="anchor" href="#引用计数算法">#</a> 引用计数算法</h4><h5 id="描述"><a class="anchor" href="#描述">#</a> 描述</h5><ul><li>每个对象均配有一个引用计数器，当对象被引用一次，计数器 + 1, 反之移除对该对象的引用时，计数器 - 1, 当值为 0 时，将被 GC 列为回收对象.</li></ul><h5 id="优点"><a class="anchor" href="#优点">#</a> 优点</h5><ul><li>算法简单</li></ul><h5 id="缺点"><a class="anchor" href="#缺点">#</a> 缺点</h5><ul><li>当出现循环依赖时，造成彼此间计数器不为 0, 则不能被 GC 回收，因此产生内存泄漏问题</li></ul><h5 id="例子"><a class="anchor" href="#例子">#</a> 例子</h5><h6 id="代码"><a class="anchor" href="#代码">#</a> 代码</h6><figure class="highlight java"><figcaption data-lang="java"><span>a</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ReferenceCountTest</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token class-name">ReferenceObject</span> object01 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReferenceObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Step 01</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token class-name">ReferenceObject</span> object02 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReferenceObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Step 02</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre>        object01<span class="token punctuation">.</span><span class="token function">setInstance</span><span class="token punctuation">(</span>object02<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Step 03</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        object02<span class="token punctuation">.</span><span class="token function">setInstance</span><span class="token punctuation">(</span>object01<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Step 04</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre>        object01 <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// Step 05</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        object02 <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// Step 06</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">ReferenceObject</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">Object</span> instance<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">ReferenceObject</span> <span class="token function">setInstance</span><span class="token punctuation">(</span><span class="token class-name">Object</span> instance<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>instance <span class="token operator">=</span> instance<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h6 id="图解"><a class="anchor" href="#图解">#</a> 图解</h6><p><img data-src="https://cdn.jsdelivr.net/gh/smile-lxy/resources@latest/images/reference-count-method.png" alt=""></p><h6 id="分析"><a class="anchor" href="#分析">#</a> 分析</h6><ul><li>Step 01: ReferenceObject01 实例引用计数 + 1 计数器 01=1</li><li>Step 02: ReferenceObject02 实例引用计数 + 1 计数器 02=1</li><li>Step 03: ReferenceObject02 实例引用计数 + 1 计数器 02=2</li><li>Step 04: ReferenceObject01 实例引用计数 + 1 计数器 01=2</li><li>Step 05: ReferenceObject01 实例引用计数 - 1 计数器 01=1</li><li>Step 06: ReferenceObject02 实例引用计数 - 1 计数器 02=1</li></ul><h6 id="结果"><a class="anchor" href="#结果">#</a> 结果</h6><ul><li>循环依赖时，造成彼此间计数器不为 0, 则不能被 GC 回收，因此产生内存泄漏问题</li></ul><h4 id="可达性分析算法"><a class="anchor" href="#可达性分析算法">#</a> 可达性分析算法</h4><h5 id="描述-2"><a class="anchor" href="#描述-2">#</a> 描述</h5><ul><li>从<strong> GC Roots</strong> 节点向下搜索，所走的路径称之为'<strong> 引用链</strong> ', 当一个对象对 GC Roots 节点没有任何引用链相连接时，则认为该对象是不可用的 (即使该对象还与其他对象相关联).</li></ul><h5 id="例子-2"><a class="anchor" href="#例子-2">#</a> 例子</h5><h6 id="代码-2"><a class="anchor" href="#代码-2">#</a> 代码</h6><figure class="highlight java"><figcaption data-lang="java"><span>a</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FinalizeEscapeGC</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">FinalizeEscapeGC</span> <span class="token constant">HOOK</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"I am still alive."</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"gc roots tracing start."</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token constant">HOOK</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FinalizeEscapeGC</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token constant">HOOK</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token comment">/** 对象不可达，进行自救 &#123;@link FinalizeEscapeGC#finalize ()&#125;, finalize () 仅且执行一次。自救成功 */</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">gc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 执行筛选 'F-Queue' 的线程优先级较低，休息一下...</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">nonNull</span><span class="token punctuation">(</span><span class="token constant">HOOK</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>            <span class="token constant">HOOK</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"oh, I am dead."</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre></pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token constant">HOOK</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        <span class="token comment">/** 对象不可达，进行自救，因 finalize () 仅且执行一次，将不再执行，自救失败 */</span></pre></td></tr><tr><td data-num="27"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">gc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre></pre></td></tr><tr><td data-num="29"></td><td><pre>        <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 执行筛选 'F-Queue' 的线程优先级较低，休息一下...</span></pre></td></tr><tr><td data-num="30"></td><td><pre>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">nonNull</span><span class="token punctuation">(</span><span class="token constant">HOOK</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>            <span class="token constant">HOOK</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"oh, I am dead."</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="35"></td><td><pre></pre></td></tr><tr><td data-num="36"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"gc roots tracing end."</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="38"></td><td><pre></pre></td></tr><tr><td data-num="39"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="40"></td><td><pre>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">finalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">finalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"help me!!!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>        <span class="token constant">HOOK</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="45"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h6 id="输出"><a class="anchor" href="#输出">#</a> 输出</h6><figure class="highlight log"><figcaption data-lang="log"><span>g</span></figcaption><table><tr><td data-num="1"></td><td><pre>gc roots tracing start<span class="token punctuation">.</span></pre></td></tr><tr><td data-num="2"></td><td><pre>help me<span class="token operator">!</span><span class="token operator">!</span><span class="token operator">!</span></pre></td></tr><tr><td data-num="3"></td><td><pre>I am still alive<span class="token punctuation">.</span></pre></td></tr><tr><td data-num="4"></td><td><pre>oh<span class="token punctuation">,</span> I am dead<span class="token punctuation">.</span></pre></td></tr><tr><td data-num="5"></td><td><pre>gc roots tracing end<span class="token punctuation">.</span></pre></td></tr></table></figure><h6 id="分析-2"><a class="anchor" href="#分析-2">#</a> 分析</h6><ul><li>经可达性分析算法所标记的对象，会经过第一次标记与筛选 (有没有必要执行 finalize () (对象有没有覆盖 finalize () 方法)):<ul><li>有必要，将对象放入<strong> F-Queue</strong> 队列中，稍后由 Jvm 自动创建一个<strong>低优先级</strong>的<strong> FinalizerThread</strong> 执行扫描该队列，进行第二次筛选 (执行 finalize () 俗称：自救), 对象在该过程期间是否与引用链上的任何一个对象建立关联:<ul><li>有，从回收集合中移除；</li><li>没有，进行回收</li></ul></li><li>没有必要，加入回收集合；</li></ul></li></ul><h6 id="使用finalize注意"><a class="anchor" href="#使用finalize注意">#</a> 使用 finalize 注意</h6><ul><li>因<strong> FinalizerThread</strong> 是一个低优先级的线程，启动后<strong> F-Queue</strong> 队列中的元素排队执行<strong> finalize ()<strong> 方法，使用不合理情况下，将导致这些对象长时间堆积在内存中，到达已经程度可能会引发</strong> OOM</strong>;</li></ul><h5 id="gc-roots对象包含-但不限于"><a class="anchor" href="#gc-roots对象包含-但不限于">#</a> GC Roots 对象包含 (但不限于)</h5><ul><li>启动类 (Bootstrap) 加载的类和创建的对象；</li><li>栈中引用的对象 (栈帧中的本地变量表引用的对象);</li><li>元数据区类静态属性引用的对象；</li><li>元数据区常量引用的对象；</li><li>JNI (Native 方法) 引用的对象；</li></ul><h5 id="引用"><a class="anchor" href="#引用">#</a> 引用</h5><ul><li>分为，强引用，软引用，弱引用，虚引用。引用强度依次逐渐减弱</li></ul><h6 id="强引用strong-reference"><a class="anchor" href="#强引用strong-reference">#</a> 强引用 (Strong Reference)</h6><ul><li>类似<strong> Object obj = new Object ();</strong>, 可以直接访问目标对象，强引用执行的对象在任何时候都不会被系统回收 (Jvm 宁愿抛出<strong> OOM</strong>, 也不会回收强引用所指向对象，因此可能会导致内存泄漏);</li></ul><h6 id="软引用soft-reference"><a class="anchor" href="#软引用soft-reference">#</a> 软引用 (Soft Reference)</h6><ul><li>SoftReference 来实现软引用，用来描述一些还有用但非必需的对象，在系统要发生内存溢出之前，将这些对象列入回收范围进行回收。若回收后还不足用于创建新对象的空间，则抛出<strong> OOM</strong>;</li></ul><h6 id="弱引用weak-reference"><a class="anchor" href="#弱引用weak-reference">#</a> 弱引用 (Weak Reference)</h6><ul><li>WeakReference 来实现弱引用，用描述一些非必需的对象，只能生存到下一次垃圾收集发生之前 (无论内存是否充足，都是回收);</li></ul><h6 id="虚引用phantom-reference"><a class="anchor" href="#虚引用phantom-reference">#</a> 虚引用 (Phantom Reference)</h6><ul><li>PhantomReference 来实现虚引用，对象是否有虚引用的存在，完全不会对其生存时间构成影响，无法通过虚引用来取得一个对象实例；</li><li>作用：可以在垃圾收集器回收时收到一个通知；</li></ul><h3 id="垃圾回收算法"><a class="anchor" href="#垃圾回收算法">#</a> 垃圾回收算法</h3><h4 id="标记-清除算法"><a class="anchor" href="#标记-清除算法">#</a> 标记 - 清除算法</h4><h5 id="描述-3"><a class="anchor" href="#描述-3">#</a> 描述</h5><ol><li>标记存活的对象；</li><li>统一回收未标记的对象；</li></ol><p><img data-src="https://cdn.jsdelivr.net/gh/smile-lxy/resources@latest/images/jvm-garbage-collection-mark-and-sweep.png" alt="标记-清除算法"></p><h5 id="缺点-2"><a class="anchor" href="#缺点-2">#</a> 缺点</h5><ul><li>效率问题 (执行期间会<strong> Stop The World</strong>)</li><li>空间问题 (容易产生大量不连续的空间碎片，无法分配大对象，会导致频繁<strong> Minjor GC</strong>, 以至导致<strong> Full GC</strong>, 最终<strong> OOM</strong>)</li></ul><h5 id="总结"><a class="anchor" href="#总结">#</a> 总结</h5><ul><li>适用于单核机器上；</li></ul><h4 id="标记-整理算法"><a class="anchor" href="#标记-整理算法">#</a> 标记 - 整理算法</h4><h5 id="描述-4"><a class="anchor" href="#描述-4">#</a> 描述</h5><ul><li>该算法是对'<strong> 标记 - 清除算法</strong> ' 的优化；</li></ul><ol><li>标记存活对象；</li><li>存活对象向一端一端，清理存活边界以外内存；</li></ol><p><img data-src="https://cdn.jsdelivr.net/gh/smile-lxy/resources@latest/images/jvm-garbage-collection-mark-and-compact.png" alt="标记-整理算法"></p><h5 id="优点-2"><a class="anchor" href="#优点-2">#</a> 优点</h5><ul><li>不会产生内存碎片；</li></ul><h5 id="总结-2"><a class="anchor" href="#总结-2">#</a> 总结</h5><ul><li>该算法适用于对象 ' 存活率高 ' 的区域；</li><li>适用于老年代区；</li></ul><h4 id="标记-复制算法"><a class="anchor" href="#标记-复制算法">#</a> 标记 - 复制算法</h4><h5 id="描述-5"><a class="anchor" href="#描述-5">#</a> 描述</h5><ol><li>标记存活对象；</li><li>将存活对象复制到另外一半内存；</li><li>清除当前这一半的内存区域；</li></ol><p><img data-src="https://cdn.jsdelivr.net/gh/smile-lxy/resources@latest/images/jvm-garbage-collection-mark-and-copy.png" alt="标记-复制算法"></p><h5 id="优点-3"><a class="anchor" href="#优点-3">#</a> 优点</h5><ul><li>对象存活率低，复制的对象就少，进而效率高 (每次最多浪费 10% 的内存 (Eden : Survivor From : Survivor To = 8 : 1 : 1));</li></ul><h5 id="缺点-3"><a class="anchor" href="#缺点-3">#</a> 缺点</h5><ul><li>可使用内存只有一半 (该算法不适合对象存活率较高场景，老年代一般不采用该算法);</li></ul><h5 id="总结-3"><a class="anchor" href="#总结-3">#</a> 总结</h5><ul><li>该算法适用于对象 ' 存活率低 ' 的区域；</li><li>适用于新生代 (Eden) 区</li></ul><h3 id="垃圾收集器"><a class="anchor" href="#垃圾收集器">#</a> 垃圾收集器</h3><h4 id="serial-收集器"><a class="anchor" href="#serial-收集器">#</a> Serial 收集器</h4><p><img data-src="https://cdn.jsdelivr.net/gh/smile-lxy/resources@latest/images/jvm-garbage-collector-serial.png" alt="垃圾收集器-Serial"></p><h5 id="描述-6"><a class="anchor" href="#描述-6">#</a> 描述</h5><ul><li>基于 ' 标记 - 复制算法 ' 的单线程收集器；</li><li>单线程收集器，执行期间<strong>用户线程</strong>暂停 (俗称:<strong>Stop The World(STW)</strong>);</li></ul><h5 id="使用方式"><a class="anchor" href="#使用方式">#</a> 使用方式</h5><pre><code>-XX:+UseSerialGC  
</code></pre><h5 id="总结-4"><a class="anchor" href="#总结-4">#</a> 总结</h5><ul><li>适用于新生代；</li><li>在单核机器上适用场景较多；</li></ul><h4 id="parnew-收集器"><a class="anchor" href="#parnew-收集器">#</a> ParNew 收集器</h4><p><img data-src="https://cdn.jsdelivr.net/gh/smile-lxy/resources@latest/images/jvm-garbage-collector-parNew.png" alt="垃圾收集器-Serial"></p><h5 id="描述-7"><a class="anchor" href="#描述-7">#</a> 描述</h5><ul><li>基于 ' 标记 - 复制算法 ' ' 并行 ' 的多线程收集器 (Serial 收集器的多线程版本);</li><li>以获取最短回收停顿时间为目标的收集器；</li><li>默认垃圾收集线程数与 CPU 数量相同；</li></ul><h5 id="使用方式-2"><a class="anchor" href="#使用方式-2">#</a> 使用方式</h5><pre><code>-XX:+UseParNewGC 
-XX:ParallelGCThreads=n // 设置垃圾收集的线程数
</code></pre><h5 id="总结-5"><a class="anchor" href="#总结-5">#</a> 总结</h5><ul><li>适用于新生代；</li></ul><h4 id="parallel-scavenge收集器"><a class="anchor" href="#parallel-scavenge收集器">#</a> Parallel Scavenge 收集器</h4><h5 id="描述-8"><a class="anchor" href="#描述-8">#</a> 描述</h5><ul><li>基于 ' 标记 - 复制算法 ' ' 并行 ' 的多线程收集器；</li><li>以吞吐量优先的收集器 (运行用户代码时间 /(运行用户代码时间 + 垃圾回收时间));</li></ul><h5 id="使用方式-3"><a class="anchor" href="#使用方式-3">#</a> 使用方式</h5><pre><code>-XX:+UseParallelGC 
-XX:MaxGCPauseMillis=n // 设置最大垃圾收集停顿时间 n(ms) (停顿时间缩短是以牺牲吞吐量和新生代(Eden)区来换取), 过小会导致频繁GC, 默认: 200
-XX:GCTimeRatio=n // 设置吞吐量大小 n%
-XX:+UseAdaptiveSizePolicy // 自适应调节策略(根据当前系统运行情况收集性能监控, 动态调整'-Xmn','-XX: SurvivorRatio', '-XX: PretenureSizeThreshold'以提供最合适的停顿时间和最大的吞吐量)
</code></pre><h5 id="总结-6"><a class="anchor" href="#总结-6">#</a> 总结</h5><ul><li>适用于新生代；</li><li>未知情况下，可使用自适应调节策略来动态调整 (出现问题时，会增大排除问题难度...);</li></ul><h4 id="serial-old-收集器"><a class="anchor" href="#serial-old-收集器">#</a> Serial Old 收集器</h4><h5 id="描述-9"><a class="anchor" href="#描述-9">#</a> 描述</h5><ul><li>基于 ' 标记 - 整理算法 ' 的单线程收集器；</li><li>单线程收集器，执行期间<strong>用户线程</strong>暂停 (俗称:<strong>Stop The World(STW)</strong>);</li></ul><h4 id="parallel-old-收集器"><a class="anchor" href="#parallel-old-收集器">#</a> Parallel Old 收集器</h4><h5 id="描述-10"><a class="anchor" href="#描述-10">#</a> 描述</h5><ul><li>基于 ' 标记 - 整理算法 ' ' 并行 ' 的多线程收集器；</li><li>以吞吐量优先的收集器</li></ul><h5 id="使用方式-4"><a class="anchor" href="#使用方式-4">#</a> 使用方式</h5><pre><code>-XX:+UseParallelOldGC 
</code></pre><h4 id="cmsconcurrent-mark-sweep-收集器"><a class="anchor" href="#cmsconcurrent-mark-sweep-收集器">#</a> CMS (Concurrent Mark Sweep) 收集器</h4><p><img data-src="https://cdn.jsdelivr.net/gh/smile-lxy/resources@latest/images/jvm-garbage-collection-concurrent-mark-sweep.png" alt="垃圾收集器-CMS"></p><h5 id="描述-11"><a class="anchor" href="#描述-11">#</a> 描述</h5><ul><li>以获取最短回收停顿时间为目标的收集器；</li><li>基于 <strong>标记 - 清除</strong>算法实现的；</li><li>CS (Collection Set): 一组可被回收的 Region 的集合；解决<strong>并发标记</strong>阶段，Old -&gt; Young 或 Young -&gt; Old 跨代引用的问题；<ul><li><strong>Points-Out</strong> (我引用了谁的对象)</li></ul></li><li>步骤:<ol><li>初始化标记 (STW: 速度很快)</li><li>并发标记</li><li>预清理</li><li>可被终止的预清理</li><li>重新标记 (STW: 持续时间最长)</li><li>并发清除</li><li>并发重置状态</li></ol></li></ul><hr><h6 id="初始化标记stw"><a class="anchor" href="#初始化标记stw">#</a> 初始化标记 (STW)</h6><p><img data-src="https://cdn.jsdelivr.net/gh/smile-lxy/resources@latest/images/jvm-garbage-collector-cms-init-mark.png" alt="垃圾收集器-CMS-初始化标记"></p><ul><li>标记老年代所有 GC Roots 对象 (从根集合可直接到达的对象);</li><li>标记年轻代所有 GC Roots 引用老年代的对象；</li><li>该阶段是基于单线程的，可通过 &quot;-XX: +CMSParallelInitialMarkEnabled&quot; 和 '-XX: ParallelGCThreads=n' 来调改变单线程的操作，开启并行处理；</li></ul><h6 id="并发标记"><a class="anchor" href="#并发标记">#</a> 并发标记</h6><p><img data-src="https://cdn.jsdelivr.net/gh/smile-lxy/resources@latest/images/jvm-garbage-collector-cms-concurrent-mark.png" alt="垃圾收集器-CMS-并发标记"></p><ul><li>从 GC Roots 进行追踪 (tracing), 找出并标记所有存活对象；</li><li>因该阶段与用户线程并发执行，可能会引发 &quot;<strong>Concurrent Model Failure</strong>&quot;;</li></ul><p><img data-src="https://cdn.jsdelivr.net/gh/smile-lxy/resources@latest/images/jvm-garbage-collector-cms-pre-clean-one.png" alt="垃圾收集器-CMS-应用程序操作导致"></p><ul><li>该阶段是与用户线程并发执行的，运行过程中，对象可能存在多种情况: &quot;新生代对象普生至老年代&quot;, &quot;大对象直接进入老年代&quot;, &quot;老年代中对象间引用关系变动&quot;. 为杜防这些情况发生，会将这些对象重新标记，对象对应 Card 上的标识改为<strong> Dirty</strong>(<strong>并发标记</strong>阶段只负责标识，<strong>重新标记</strong>阶段会只扫描这些的对象，避免扫描整个老年代.);</li></ul><h6 id="预清理"><a class="anchor" href="#预清理">#</a> 预清理</h6><p><img data-src="https://cdn.jsdelivr.net/gh/smile-lxy/resources@latest/images/jvm-garbage-collector-cms-pre-clean-two.png" alt="垃圾收集器-CMS-预清理02"></p><ul><li>处理<strong>并发标记</strong>阶段 Card 上标识为<strong> Dirty</strong> 的对象；</li></ul><h6 id="可被终止的预清理"><a class="anchor" href="#可被终止的预清理">#</a> 可被终止的预清理</h6><ul><li>尝试分担<strong>重新标记</strong>阶段的工作；</li><li>该阶段是重复做相同的事情，直到发生<strong> abort</strong> 的条件 (重复次数，持续时间等), 可通过 &quot;-XX:CMSMaxAbortablePrecleanTime=n&quot; , &quot;-XX:CMSScheduleRemarkEdenPenetration=n&quot;, &quot;-XX:CMSScheduleRemarkEdenSizeThreshold=n&quot; 等参数来调整；</li></ul><h6 id="重新标记stw"><a class="anchor" href="#重新标记stw">#</a> 重新标记 (STW)</h6><ul><li>标记老年代所有的存活对象，重新扫描整个堆；<ul><li>因老年代中的对象可能被新生代中对象引用，所以需要扫描新生代；<ul><li>因扫描时，会使用新生代中不可达的对象当做 &quot;GC Roots&quot; 对象，来扫描老年代。当这些不可达的对象引用老年代中对象太多情况下，会导致该阶段耗时过长 (实际这些扫描是没必要的). 出现这种情况下可通过 &quot;-XX: +CMSScavengeBeforeRemark&quot; 来优化该阶段，在重新标记前，先执行一次 &quot;YGC&quot;, 回收不可达的对象，可达的对象移入幸存区 (Survivor) 或老年代，以减少年轻代对老年代的无效引用，再执行<strong>重新标记</strong>时，只需扫描幸存区即可，这样就减少了扫描时间.</li></ul></li></ul></li><li>该阶段是基于单线程的，可通过 &quot;-XX: +CMSParallelRemarkEnabled&quot; 开启并行处理；</li></ul><h6 id="并发清除"><a class="anchor" href="#并发清除">#</a> 并发清除</h6><ul><li>根据清除算法清除不可用对象回收内存空间；</li><li>因基于 &quot;<strong> 并发 - 标记 - 清除</strong> &quot;算法，清除后不会对内存做整理，可能就会出现内存碎片，造成 OOM, 可通过&quot;-XX: +UseCMSCompactAtFullCollection&quot;和&quot;-XX: CMSFullGCsBeforeCompaction=n&quot; 指定执行 'n' 次后做一次内存整理 (默认: 0, 每次 Full GC 都会执行内存整理);</li><li>因该阶段与用户线程并发执行，可能会产生新的垃圾，这部分垃圾称为 &quot;浮动垃圾&quot;, 留在下次 GC 时清除；</li></ul><h6 id="并发清除-2"><a class="anchor" href="#并发清除-2">#</a> 并发清除</h6><ul><li>清除内部状态</li></ul><h5 id="使用方式-5"><a class="anchor" href="#使用方式-5">#</a> 使用方式</h5><pre><code>-XX:+UseConcMarkSweepGC // 开始使用CMS垃圾收集器
-XX:+CMSScavengeBeforeRemark // &quot;重新标记&quot;阶段前, 先执行一次YGC
-XX:+ScavengeBeforeFullGC // &quot;并发清除&quot;阶段前, 先执行一次YGC
-XX:UseCMSInitiatingOccupancyOnly // 配置JVM不基于运行时收集的数据来动态调整垃圾收集周期(关闭自适应调节策略)
-XX:CMSInitiatingOccupancyFraction=n // 配置JVM在老年代内存占用达到n%时触发GC(需搭配&quot;-XX: UseCMSInitiatingOccupancyOnly&quot;使用, 否则仅在第一次使用该配置, 后续依然使用自适应调节策略) 默认: 92
-XX:+UseCMSCompactAtFullCollection // 开启对老年代进行内存整理, 以消除内存空间碎片化
-XX: CMSFullGCsBeforeCompaction=n // 执行n次后进行内存整理
-XX:+CMSParallelInitialMarkEnabled // 初始化标记阶段开启并行操作
-XX:+CMSParallelRemarkEnabled // &quot;重新标记&quot;阶段开启并行操作
-XX:ParallelGCThreads=n // 并发回收线程数, 默认: (cpus &lt;= 8) ? cpus : 3 + ((cpus * 5) / 8)
-XX:CMSMaxAbortablePrecleanTime=n // 预清理阶段, 最大持续时间(ms) 默认: 5000
-XX:CMSScheduleRemarkEdenPenetration=n // &quot;可被终止的预清理&quot;阶段, Eden区域内存达到n%后, 进入&quot;重新标记阶段&quot;阶段, 默认: 50
-XX:CMSScheduleRemarkEdenSizeThreshold=n // &quot;可被终止的预清理&quot;阶段, Eden区域内存达到nM后, 进入&quot;重新标记阶段&quot;阶段, 默认: 2

-XX:+CMSIncrementalMode // (i-cms)增量的进行垃圾收集, 并发阶段, 不会独占整个周期, 周期性暂停, 唤醒应用线程. 收集器把并发工作划分为片段, 安排在次级(minor)回收间执行(在少量CPU, 需低延迟服务器上优势会高些).
-XX:+CMSIncrementalPacing // 开启基于运行时收集的数据动态调整垃圾回收任务的数量
-XX:CMSIncrementalDutyCycle=n // 每次增量回收垃圾占总垃圾的比例   默认: 10
-XX:CMSIncrementalDutyCycleMin=n // 每次增量回收垃圾站总垃圾的最小比例 默认: 0

-XX:ExplicitGCInvokesConcurrent // System::gc时做background模式的Full GC(默认会STW)
-XX:+DisableExplicitGC // 禁止在运行期间显式调用System::gc

-XX:-ReduceInitialCardMarks // 禁止并发初始化新对象与RS更新放到一起执行
</code></pre><h5 id="问题"><a class="anchor" href="#问题">#</a> 问题</h5><h6 id="concurrent-model-failure"><a class="anchor" href="#concurrent-model-failure">#</a> Concurrent Model Failure</h6><ul><li>GC 执行过程中，用户线程也在运行，当年轻代空间不足时触发 &quot;Minjor GC&quot;, &quot;Minjor GC&quot; 执行过程中可能会有幸存者进入老年代，此时老年代内存不足，然后就抛出 &quot;concurrent mode failure&quot;;</li><li>可通过 &quot;-XX: +UseCMSInitiatingOccupancyOnly&quot; 和 &quot;-XX: CMSInitiatingOccupancyFraction=n&quot; 合理配置来解决该问题；</li></ul><h6 id="promotion-failed"><a class="anchor" href="#promotion-failed">#</a> Promotion Failed</h6><ul><li>GC 执行过程中，&quot;Survivor Space&quot; 空间不足，对象直接进入老年代，此时老年代内存不足，然后抛出 &quot;promotion failed&quot;(可能是老年代空间足够，是碎片化的，转入老年代的对象找不到连续的空间存放导致的);<ul><li>过早提升: Minor GC 过程中，&quot;Surevivor To&quot; 不足以存储 &quot;Eden&quot; 和 &quot;Surevivor From&quot; 中存活的对象，多余的对象将被移入老年代 (该种情况可调整 Survivor 空间大小);</li></ul></li><li>视情况而定，可通过 &quot;-XX: CMSFullGCsBeforeCompaction=n&quot; 进行空间整理......</li></ul><h5 id="缺点-4"><a class="anchor" href="#缺点-4">#</a> 缺点</h5><ul><li>只回收老年代，以吞吐量换取停顿时间；</li><li>应用长时间运行情况下，容易造成严重的内存碎片化 (可解决);</li><li>无法解决<strong>浮动垃圾</strong>问题；</li></ul><h4 id="g1-收集器"><a class="anchor" href="#g1-收集器">#</a> G1 收集器</h4><p><img data-src="https://cdn.jsdelivr.net/gh/smile-lxy/resources@latest/images/jvm-garbage-collector-g1.png" alt="垃圾收集器-G1"></p><h5 id="描述-12"><a class="anchor" href="#描述-12">#</a> 描述</h5><ul><li><p>使用相对较短的停顿时间来达到最大吞吐量的收集器；</p></li><li><p>SATB(Snapshot At The Beginning): <strong>并发标记</strong>阶段，用户线程与垃圾收集线程并发执行，就可能出现<strong>突变者</strong> (对象被引用或取消引用), 根据 &quot;<strong> 三色标记法</strong> &quot; 维护并发 GC 的正确性；</p><ul><li>白色：对象没有被标记到，标记阶段结束后，会被当做垃圾回收掉；</li><li>灰色：对象已被标记，但里面还有 field 没有被标记；</li><li>黑色：对象已被标记，且里面所有 field 也已被标记；</li></ul></li><li><p>TAMS (Top At Mark Start): 解决<strong>并发标记</strong>阶段，新对象被 new, 但未被引用，而导致漏标的情况；</p><ul><li>并发标记中用到的两个 Bitmap<ul><li>prev Bitmap: 记录第 n-1 轮 Concurrent Marking 所得的对象存活状态. (由于第 n－1 轮 Concurrent Marking 已经完成，这个 Bitmap 的信息可以直接使用);</li><li>next Bitmap: 记录第 n 轮 Concurrent Marking 的结果. (这个 Bitmap 是当前将要或正在进行的 Concurrent Marking 的结果，尚未完成，所以还不能使用);</li></ul></li><li>Region 中几个指针<br><img data-src="https://cdn.jsdelivr.net/gh/smile-lxy/resources@latest/images/region_indicator.png" alt="垃圾收集器-G1-Region内指针"><ul><li>(Bottom - Top): 已使用的空间；<ol><li>(Bottom - Prev TAMS): 已确定存活的对象；</li><li>(Prev TAMS - Next TAMS): 在第 n-1 轮 Concurrent Marking 隐式存活的对象；</li><li>(Next TAMS - Top): 在第 n 轮 Concurrent Marking 隐式存活的对象；</li></ol></li><li>(Top - End): 尚未使用，可分配的空间；</li></ul></li></ul></li><li><p>RS (Remembered Set): 解决<strong>并发标记</strong>阶段，Old -&gt; Young 或 Young -&gt; Old 跨代引用的问题；</p><ul><li>每个 Region 附有个 RS, 用于记录其他 Region 中的对象引用本 Region 中对象的关系，<strong>Points-Into</strong> (谁引用了我)</li></ul></li><li><p>CS (Collection Set): 一组可被回收的 Region 的集合；</p></li><li><p>TLAB (Thread Local Allocation Buffer): 本地线程缓冲区，为了使对象尽快分配到内存空间，每个线程都有固定的分区用于分配对象；</p></li><li><p>Humongous: 存放大对象的 Region (空间占 Region 一半及以上的对象)</p><ul><li>在 Mixed GC 和 Full GC 回收</li></ul></li><li><p>步骤:</p><ol><li>初始化标记 (STW: 速度很快)</li><li>并发标记</li><li>最终标记 (STW)</li><li>清理 (STW)</li></ol></li></ul><hr><h6 id="初始化标记stw-2"><a class="anchor" href="#初始化标记stw-2">#</a> 初始化标记 (STW)</h6><ul><li>标记 GC Roots 对象 (从根集合可直接到达的对象);</li><li>将字段压入扫描栈 (marking stack), 等待后续的扫描；</li><li>使用外部 bitmap 记录扫 mark 信息 (未使用对象头中 mark word 里的 mark bit 来记录);</li></ul><h6 id="并发标记并发"><a class="anchor" href="#并发标记并发">#</a> 并发标记 (并发)</h6><ul><li>从扫描栈中取出对象引用，递归扫描整个堆获取的对象图；</li><li>对对象图上对象标记，压入扫描栈；</li><li>重复执行上两步，知道扫描栈为空；</li><li>扫描 SATB write barrier 所记录的引用 (扫描栈中执行完，就撤出);</li></ul><p>===================</p><ul><li>该阶段是并发进行的，就需要解决程序进行的过程中未标，漏标的情况. G1 通过 Writer barrier (Logging barrier) 来实现；</li></ul><h6 id="最终标记stw"><a class="anchor" href="#最终标记stw">#</a> 最终标记 (STW)</h6><ul><li>扫描<strong>并发标记</strong>后剩下的 SATB write barrier 所记录的引用；</li><li>扫描弱引用；</li></ul><h6 id="清理stw"><a class="anchor" href="#清理stw">#</a> 清理 (STW)</h6><ul><li>清除未标记的对象 (将 Region 中存活 (标记过) 的对象拷贝到空的 Region 中，回收原 Region);<ul><li>可以自由选择任意多个 Region 来独立构成收集集合 CS (Collection Set)(靠 Per-Region Remembered Set 实现);</li><li>选择 CS 后，采用并行复制算法将 CS 中每个 Region 里存活的对象拷贝到新的 Region 中；</li><li>回收原 Region;</li></ul></li><li>重置标记状态；</li></ul><h5 id="模式"><a class="anchor" href="#模式">#</a> 模式</h5><ul><li>Young GC<ul><li>当年轻代无法分配新对象时，选定所有年轻代里的 Region 进行收集清理 (可通过控制年轻代里的 Region 个数来控制 Young GC 的开销 (-XX:NewRatio=n))</li></ul></li><li>Mixed GC<ul><li>视全局并发标记后统计，选定所有年轻代里的 Region 进行收集清理，根据 Global Concurrent Marking 统计得出收集收益高的若干老年代里的 Region, 在用户指定的开销目标范围内尽可能选择收益高的老年代里的 Region 进行收集清理；<ul><li>Global Concurrent Marking 主要是为 Mixed GC 提供服务，</li></ul></li></ul></li></ul><p>==================</p><ul><li>Full GC (G1 GC 的控制范围内没有 Full GC)<ul><li>若 Mixed GC 无法跟上程序分配内存的速度，导致老年代填满无法继续进行 Mixed GC, 就默认采用 Serial Old 算法 (和 -XX:+UseSerialGC 一样) 堆整个堆内存进行收集清理；</li></ul></li></ul><hr><ul><li>Young GC 与 Mixed GC 之间视运行情况切换，虚拟机会定时做全局并发标记；<ul><li>初始化标记默认在 Young GC 阶段执行；</li><li>全局并发标记进行时，虚拟机不会执行 Mixed GC;</li><li>Mixed GC 进行时，虚拟机不能执行初始化标记；</li><li><strong>Tip</strong>: 正常流程中没有 Full GC, 老年代里的 Region 收集清理靠 Mixed GC 来完成.(视用户 Jvm 配置与程序运行情况而定);</li></ul></li></ul><h5 id="使用方式-6"><a class="anchor" href="#使用方式-6">#</a> 使用方式</h5><pre><code>-XX:+UseG1GC // 开启使用G1垃圾收集器
-XX:G1HeapRegionSize=nm // 设置G1区域(Region)大小(范围 1 ~ 32MB), 堆为 2048 * Region (为减少过多分配Humongous对GC的影响, 特殊场景下可适当调整大小)
-XX:MaxGCPauseMillis=n // 期望GC最大的暂停时间, 默认: 200
-XX:ParallelGCThreads=n // GC过程中并行线程数, 默认: cpu &lt;= 8 时, 8; &gt;8时, 5/8 * cpu core
-XX:G1ConcRefinementThreads=n // 扫描log Buffer, 更新Rset时, 并发优化线程数
-XX:ConcGCThreads=n // 并发标记线程数, 默认: -XX:ParallelGCThreads 的1/4
-XX:+ParallelRefProcEnabled // 开启并行对象引用处理
-XX:ReferencesPerThread=n // 处理对象引用并行线程数, 最大线程数受 -XX:ParallelGCThreads 限制
-XX:NewRatio=n // 新老年代比例, 默认: 2 (1:2)
-XX:SurvivorRatio=n // Survivor与Eden比例, 默认: 8 (2:8)
-XX:G1NewSizePercent=n // 年轻代占堆的n%内存, 默认: 5
-XX:G1MaxNewSizePercent=n // 年轻代占堆的最大内存, 默认: 60
-XX:MaxTenuringThreshold=n // 对象在新生代经过n次YGC方可进入老年代, 默认: 15
-XX:InitiatingHeapOccupancyPercent=n // 触发标记的堆占用内存阈值(non_young_capacity_bytes: Old Generadion Region + Humongous), 默认: 45
-XX:G1HeapWastePercent=n // 愿意浪费堆的n%, Global Concurrent Marking后可回收内存小于n, 则不会触发Mixed GC, 默认: 5
-XX:G1ReservePercent=n // 预留G1HeapWastePercent堆的n%内存, 防止普升失败, 默认: 10
-XX:G1MixedGCLiveThresholdPercent=n // 一个Region中存活的对象超过n%, 就不会被认为可垃圾Region, 通过该参数可影响每次Mixed GC回收的Region数(n越大, 越容易被认为是垃圾分区), 默认: 85 [^1],[^2]
-XX:G1MixedGCCountTarget=n // 经过n次Mixed GC, 老年代所有Region将被回收一遍. 如果 Mixed GC中STW的时间过长, 可以考虑增大这个参数.(可用来调整每次Mixed GC回收多少个Region, 即有助于调节Mixed GC的停顿时间), 默认: 8 [^3]
-XX:G1RSetUpdatingPauseTimePercent=n // GC 清除阶段更新RSet的时间百分比, 默认: 10

-XX:+G1SummarizeRSetStats // 显示RS粗化过程
-XX:G1SummarizeRSetStatsPeriod=n // 每隔n次GC后收集一次RS的统计信息
-XX:+PrintAdaptiveSizePolicy // 打印&quot;自适应调节策略&quot;模式下运行的决策细节
-XX:+PrintReferenceGC // 打印详细的引用信息
</code></pre><h5 id="优点-4"><a class="anchor" href="#优点-4">#</a> 优点</h5><ul><li>并行性：回收期间，可由多个 GC 线程同时工作，有效利用多核计算能力；</li><li>分代 GC: 同时兼顾年轻代与老年代；</li><li>空间整理：在每次回收时有效的复制对象，减少空间碎片；</li><li>停顿时间可控：在停顿时间上添加了预测机制，收集器将根据用户指定期望停顿时间回收收益率越高的 Region;</li></ul><h5 id="缺点-5"><a class="anchor" href="#缺点-5">#</a> 缺点</h5><ul><li>Region 空间的大小与大对象占用空间很难保证一致，这将导致空间浪费 (Region 设置过小，分配超过一个 Region 空间的大对象时，有时寻找连续的空间会有麻烦);</li></ul><h5 id="总结-7"><a class="anchor" href="#总结-7">#</a> 总结</h5><ul><li>清理算法区别<ul><li>G1 的清理算法从根集合遍历对象图来判定对象的生死，不需要依赖 Global Concurrent Marking 的结果，有就用，没有也行；</li><li>标记 - 清除算法依赖于标记阶段对对象生死的判定；</li></ul></li></ul><h3 id="引用-2"><a class="anchor" href="#引用-2">#</a> 引用</h3><ul><li><p><strong>&lt;&lt;深入了解 Java 虚拟机 II&gt;&gt;</strong></p></li><li><p><span class="exturl" data-url="aHR0cHM6Ly9kb2NzLm9yYWNsZS5jb20vamF2YXNlLzgvZG9jcy90ZWNobm90ZXMvZ3VpZGVzL3ZtL2djdHVuaW5nL2Ntcy5odG1s">Concurrent Mark Sweep (CMS) Collector</span></p></li><li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YzcyNjJhMTUxODgyNTJmMzA0ODQzNTE=">CMS 垃圾收集器</span></p></li><li><p><span class="exturl" data-url="aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vbW9ja2l0b2J1aWxkZXIvcC8zNzU0NTA5Lmh0bWw=">Tomcat GC 参数详解</span></p></li><li><p><span class="exturl" data-url="aHR0cHM6Ly9tcC53ZWl4aW4ucXEuY29tL3MvTkptMjhMeURXRll2TkRSNXlVOWRhZz8=">java 垃圾回收以及 jvm 参数调优概述</span></p></li><li><p><span class="exturl" data-url="aHR0cDovL3d3dy5qYXZhYWR1Lm9ubGluZS8/cD00NjA=">CMS 垃圾收集器详解</span></p></li><li><p><span class="exturl" data-url="aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vbGl0dGxlTG9yZC9wLzUzODA2MjQuaHRtbA==">详解 CMS 垃圾回收机制</span></p></li><li><p><span class="exturl" data-url="aHR0cDovL2NpdGVzZWVyeC5pc3QucHN1LmVkdS92aWV3ZG9jL2Rvd25sb2FkP2RvaT0xMC4xLjEuNjMuNjM4NiZhbXA7cmVwPXJlcDEmYW1wO3R5cGU9cGRm">G1 论文</span></p></li><li><p><span class="exturl" data-url="aHR0cHM6Ly9obGx2bS1ncm91cC5pdGV5ZS5jb20vZ3JvdXAvdG9waWMvMjE0Njg=">G1 - 名词</span></p></li><li><p><span class="exturl" data-url="aHR0cHM6Ly9obGx2bS1ncm91cC5pdGV5ZS5jb20vZ3JvdXAvdG9waWMvNDQzODE=">G1 - 算法原理</span></p></li><li><p><span class="exturl" data-url="aHR0cHM6Ly9obGx2bS1ncm91cC5pdGV5ZS5jb20vZ3JvdXAvdG9waWMvNDQ1Mjk=">关于 incremental update 与 SATB 的一点理解</span></p></li><li><p><span class="exturl" data-url="aHR0cHM6Ly9wbHVtYnIuaW8vaGFuZGJvb2svZ2FyYmFnZS1jb2xsZWN0aW9uLWFsZ29yaXRobXMtaW1wbGVtZW50YXRpb25z">JAVA GARBAGE COLLECTION HANDBOOK</span></p></li><li><p><span class="exturl" data-url="aHR0cDovL3d3dy5qYXZhYWR1Lm9ubGluZS8/cD00NjU=">G1 垃圾收集器详解</span></p></li><li><p><span class="exturl" data-url="aHR0cHM6Ly93d3cub3JhY2xlLmNvbS90ZWNobmV0d29yay9jbi9hcnRpY2xlcy9qYXZhL2cxZ2MtMTk4NDUzNS16aHMuaHRtbA==">垃圾优先型垃圾回收器调优 - 中文</span></p></li><li><p><span class="exturl" data-url="aHR0cHM6Ly93d3cub3JhY2xlLmNvbS90ZWNobmljYWwtcmVzb3VyY2VzL2FydGljbGVzL2phdmEvZzFnYy5odG1s">垃圾优先型垃圾回收器调优 - 英文</span></p></li><li><p><span class="exturl" data-url="aHR0cHM6Ly93d3cuaW5mb3EuY29tL2FydGljbGVzL3R1bmluZy10aXBzLUcxLUdDLw==">Tips for Tuning the Garbage First Garbage Collector</span></p></li><li><p><span class="exturl" data-url="aHR0cDovL3d3dy5uYXJpaGlyby5pbmZvL2cxZ2MtaW1wbC1ib29rLw==">徹底解剖「G1GC」実装編</span></p></li><li><p><span class="exturl" data-url="aHR0cHM6Ly93d3cuaW5mb3EuY29tL2FydGljbGVzL0cxLU9uZS1HYXJiYWdlLUNvbGxlY3Rvci1Uby1SdWxlLVRoZW0tQWxsLw==">G1GC 日志解析</span></p></li><li><p><span class="exturl" data-url="aHR0cHM6Ly93d3cub3JhY2xlLmNvbS93ZWJmb2xkZXIvdGVjaG5ldHdvcmsvdHV0b3JpYWxzL29iZS9qYXZhL0cxR2V0dGluZ1N0YXJ0ZWQvaW5kZXguaHRtbA==">G1GC 学习 - 官方</span></p></li><li><p><span class="exturl" data-url="aHR0cHM6Ly9kb2NzLm9yYWNsZS5jb20vamF2YXNlLzgvZG9jcy90ZWNobm90ZXMvZ3VpZGVzL3ZtL2djdHVuaW5nL3RvYy5odG1s">虚拟机收集器 - 官方</span></p></li></ul><h3 id="工具"><a class="anchor" href="#工具">#</a> 工具</h3><ul><li><span class="exturl" data-url="aHR0cHM6Ly9nY2Vhc3kuaW8vZ2MtaW5kZXguanNw">gceasy</span></li><li><span class="exturl" data-url="aHR0cHM6Ly9jb25zb2xlLnBlcmZtYS5jb20v">perfma</span></li><li><span class="exturl" data-url="aHR0cHM6Ly9wbHVtYnIuaW8v">plumbr</span></li></ul><h3 id="案例"><a class="anchor" href="#案例">#</a> 案例</h3><ul><li><span class="exturl" data-url="aHR0cHM6Ly9tcC53ZWl4aW4ucXEuY29tL3MvSEtkcG1tdkpLcTQ1UVpkVjRRMmNZUT8=">-XX:+CMSScavengeBeforeRemark</span></li><li><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FpYW5nX3ppXy9hcnRpY2xlL2RldGFpbHMvMTAwNzAwNzg0">-XX:SoftRefLRUPolicyMSPerMB</span></li><li><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC81NDU0NjY4NA==">-XX:G1MixedGCLiveThresholdPercent=n</span></li></ul><h3 id="常用参数"><a class="anchor" href="#常用参数">#</a> 常用参数</h3><pre><code>-verbose: gc 或者 -Xlog:gc
-XX:+PrintGCDateStamps // 打印GC的时间戳
-XX:+PrintGCDetails  // 打印详细的GC日志
-XX:+PrintGCApplicationStoppedTime // 打印GC期间应用停止响应的时间
-XX:+PrintGCApplicationConcurrentTime // 答应GC期间应用运行时间

-XX:+UseGCLogFileRotation // 滚动输出GC日志
-XX:NumberOfGCLogFiles=10 
-XX:GCLogFileSize=10M
-Xloggc: /home/XX/gc/XX_gc.log

-XX:NewRatio=n // 新老年代比例(默认: 2 (1:2))
-XX:SurvivorRatio=n // Survivor与Eden比例(默认: 8 (2:8))
-XX:MaxTenuringThreshold=n // 对象在新生代经过n次YGC方可进入老年代(默认: 15)

-XX:+UnlockDiagnosticVMOptions    //后面2个参数的需要
-XX:+PrintCompilation   //打印JIT编译详情
-XX:+PrintInlining    //打印内联详情

// OOM输出
-XX:+HeapDumpOnOutOfMemoryError 
-XX:HeapDumpPath=/home/XX/dump_OOME.hprof

-XX:+DisableExplicitGC

// 收集器
-XX:+UseSerialGC // 串行收集器
-XX:+UseParallelGC // 并行收集器
-XX:+UseParalledlOldGC // 并行老年代收集器
-XX:+UseConcMarkSweepGC // 并发收集器

</code></pre><h3 id="标注"><a class="anchor" href="#标注">#</a> 标注</h3><div class="tags"><a href="/tags/Java/" rel="tag"><i class="ic i-tag"></i> Java</a> <a href="/tags/Jvm/" rel="tag"><i class="ic i-tag"></i> Jvm</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">Edited on</span> <time title="Modified: 2024-02-26 02:22:11" itemprop="dateModified" datetime="2024-02-26T02:22:11+09:00">2024-02-26</time> </span><span id="/jvm-carbage-collect/" class="item leancloud_visitors" data-flag-title="Jvm 垃圾回收" title="Views"><span class="icon"><i class="ic i-eye"></i> </span><span class="text">Views</span> <span class="leancloud-visitors-count"></span> <span class="text">times</span></span></div><div id="copyright"><ul><li class="author"><strong>Post author: </strong>水云游 <i class="ic i-at"><em>@</em></i>冴羽　逸秋</li><li class="link"><strong>Post link: </strong><a href="https://blog.issyuu.com/jvm-carbage-collect/" title="Jvm 垃圾回收">https://blog.issyuu.com/jvm-carbage-collect/</a></li><li class="license"><strong>Copyright Notice: </strong>All articles in this blog are licensed under <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> unless stating additionally.</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/jvm-running-data-area/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;gh&#x2F;smile-lxy&#x2F;resources@latest&#x2F;images&#x2F;random&#x2F;e4b3ac43a8014fcfa62690bfbb906743.md.jpg" title="Jvm运行时数据区"><span class="type">Previous Post</span> <span class="category"><i class="ic i-flag"></i> Jvm</span><h3>Jvm运行时数据区</h3></a></div><div class="item right"><a href="/jvm-tools-instruct/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;gh&#x2F;smile-lxy&#x2F;resources@latest&#x2F;images&#x2F;random&#x2F;b2eeb9bbef8e10749f97b0182647a32c.md.jpg" title="Java性能调优-指令(Java8)"><span class="type">Next Post</span> <span class="category"><i class="ic i-flag"></i> Jvm</span><h3>Java性能调优-指令(Java8)</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="Contents"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9E%E6%94%B6%E7%AE%97%E6%B3%95"><span class="toc-number">2.</span> <span class="toc-text">回收算法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%95%E7%94%A8%E8%AE%A1%E6%95%B0%E7%AE%97%E6%B3%95"><span class="toc-number">2.1.</span> <span class="toc-text">引用计数算法</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8F%8F%E8%BF%B0"><span class="toc-number">2.1.1.</span> <span class="toc-text">描述</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BC%98%E7%82%B9"><span class="toc-number">2.1.2.</span> <span class="toc-text">优点</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BC%BA%E7%82%B9"><span class="toc-number">2.1.3.</span> <span class="toc-text">缺点</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BE%8B%E5%AD%90"><span class="toc-number">2.1.4.</span> <span class="toc-text">例子</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81"><span class="toc-number">2.1.4.1.</span> <span class="toc-text">代码</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%9B%BE%E8%A7%A3"><span class="toc-number">2.1.4.2.</span> <span class="toc-text">图解</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%88%86%E6%9E%90"><span class="toc-number">2.1.4.3.</span> <span class="toc-text">分析</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%BB%93%E6%9E%9C"><span class="toc-number">2.1.4.4.</span> <span class="toc-text">结果</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%AF%E8%BE%BE%E6%80%A7%E5%88%86%E6%9E%90%E7%AE%97%E6%B3%95"><span class="toc-number">2.2.</span> <span class="toc-text">可达性分析算法</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8F%8F%E8%BF%B0-2"><span class="toc-number">2.2.1.</span> <span class="toc-text">描述</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BE%8B%E5%AD%90-2"><span class="toc-number">2.2.2.</span> <span class="toc-text">例子</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81-2"><span class="toc-number">2.2.2.1.</span> <span class="toc-text">代码</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E8%BE%93%E5%87%BA"><span class="toc-number">2.2.2.2.</span> <span class="toc-text">输出</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%88%86%E6%9E%90-2"><span class="toc-number">2.2.2.3.</span> <span class="toc-text">分析</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8finalize%E6%B3%A8%E6%84%8F"><span class="toc-number">2.2.2.4.</span> <span class="toc-text">使用 finalize 注意</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#gc-roots%E5%AF%B9%E8%B1%A1%E5%8C%85%E5%90%AB-%E4%BD%86%E4%B8%8D%E9%99%90%E4%BA%8E"><span class="toc-number">2.2.3.</span> <span class="toc-text">GC Roots 对象包含 (但不限于)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%BC%95%E7%94%A8"><span class="toc-number">2.2.4.</span> <span class="toc-text">引用</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%BC%BA%E5%BC%95%E7%94%A8strong-reference"><span class="toc-number">2.2.4.1.</span> <span class="toc-text">强引用 (Strong Reference)</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E8%BD%AF%E5%BC%95%E7%94%A8soft-reference"><span class="toc-number">2.2.4.2.</span> <span class="toc-text">软引用 (Soft Reference)</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%BC%B1%E5%BC%95%E7%94%A8weak-reference"><span class="toc-number">2.2.4.3.</span> <span class="toc-text">弱引用 (Weak Reference)</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E8%99%9A%E5%BC%95%E7%94%A8phantom-reference"><span class="toc-number">2.2.4.4.</span> <span class="toc-text">虚引用 (Phantom Reference)</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E7%AE%97%E6%B3%95"><span class="toc-number">3.</span> <span class="toc-text">垃圾回收算法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%87%E8%AE%B0-%E6%B8%85%E9%99%A4%E7%AE%97%E6%B3%95"><span class="toc-number">3.1.</span> <span class="toc-text">标记 - 清除算法</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8F%8F%E8%BF%B0-3"><span class="toc-number">3.1.1.</span> <span class="toc-text">描述</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BC%BA%E7%82%B9-2"><span class="toc-number">3.1.2.</span> <span class="toc-text">缺点</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">3.1.3.</span> <span class="toc-text">总结</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%87%E8%AE%B0-%E6%95%B4%E7%90%86%E7%AE%97%E6%B3%95"><span class="toc-number">3.2.</span> <span class="toc-text">标记 - 整理算法</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8F%8F%E8%BF%B0-4"><span class="toc-number">3.2.1.</span> <span class="toc-text">描述</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BC%98%E7%82%B9-2"><span class="toc-number">3.2.2.</span> <span class="toc-text">优点</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-2"><span class="toc-number">3.2.3.</span> <span class="toc-text">总结</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%87%E8%AE%B0-%E5%A4%8D%E5%88%B6%E7%AE%97%E6%B3%95"><span class="toc-number">3.3.</span> <span class="toc-text">标记 - 复制算法</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8F%8F%E8%BF%B0-5"><span class="toc-number">3.3.1.</span> <span class="toc-text">描述</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BC%98%E7%82%B9-3"><span class="toc-number">3.3.2.</span> <span class="toc-text">优点</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BC%BA%E7%82%B9-3"><span class="toc-number">3.3.3.</span> <span class="toc-text">缺点</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-3"><span class="toc-number">3.3.4.</span> <span class="toc-text">总结</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E5%99%A8"><span class="toc-number">4.</span> <span class="toc-text">垃圾收集器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#serial-%E6%94%B6%E9%9B%86%E5%99%A8"><span class="toc-number">4.1.</span> <span class="toc-text">Serial 收集器</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8F%8F%E8%BF%B0-6"><span class="toc-number">4.1.1.</span> <span class="toc-text">描述</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F"><span class="toc-number">4.1.2.</span> <span class="toc-text">使用方式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-4"><span class="toc-number">4.1.3.</span> <span class="toc-text">总结</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#parnew-%E6%94%B6%E9%9B%86%E5%99%A8"><span class="toc-number">4.2.</span> <span class="toc-text">ParNew 收集器</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8F%8F%E8%BF%B0-7"><span class="toc-number">4.2.1.</span> <span class="toc-text">描述</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F-2"><span class="toc-number">4.2.2.</span> <span class="toc-text">使用方式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-5"><span class="toc-number">4.2.3.</span> <span class="toc-text">总结</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#parallel-scavenge%E6%94%B6%E9%9B%86%E5%99%A8"><span class="toc-number">4.3.</span> <span class="toc-text">Parallel Scavenge 收集器</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8F%8F%E8%BF%B0-8"><span class="toc-number">4.3.1.</span> <span class="toc-text">描述</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F-3"><span class="toc-number">4.3.2.</span> <span class="toc-text">使用方式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-6"><span class="toc-number">4.3.3.</span> <span class="toc-text">总结</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#serial-old-%E6%94%B6%E9%9B%86%E5%99%A8"><span class="toc-number">4.4.</span> <span class="toc-text">Serial Old 收集器</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8F%8F%E8%BF%B0-9"><span class="toc-number">4.4.1.</span> <span class="toc-text">描述</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#parallel-old-%E6%94%B6%E9%9B%86%E5%99%A8"><span class="toc-number">4.5.</span> <span class="toc-text">Parallel Old 收集器</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8F%8F%E8%BF%B0-10"><span class="toc-number">4.5.1.</span> <span class="toc-text">描述</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F-4"><span class="toc-number">4.5.2.</span> <span class="toc-text">使用方式</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#cmsconcurrent-mark-sweep-%E6%94%B6%E9%9B%86%E5%99%A8"><span class="toc-number">4.6.</span> <span class="toc-text">CMS (Concurrent Mark Sweep) 收集器</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8F%8F%E8%BF%B0-11"><span class="toc-number">4.6.1.</span> <span class="toc-text">描述</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96%E6%A0%87%E8%AE%B0stw"><span class="toc-number">4.6.1.1.</span> <span class="toc-text">初始化标记 (STW)</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%B9%B6%E5%8F%91%E6%A0%87%E8%AE%B0"><span class="toc-number">4.6.1.2.</span> <span class="toc-text">并发标记</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E9%A2%84%E6%B8%85%E7%90%86"><span class="toc-number">4.6.1.3.</span> <span class="toc-text">预清理</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%8F%AF%E8%A2%AB%E7%BB%88%E6%AD%A2%E7%9A%84%E9%A2%84%E6%B8%85%E7%90%86"><span class="toc-number">4.6.1.4.</span> <span class="toc-text">可被终止的预清理</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E9%87%8D%E6%96%B0%E6%A0%87%E8%AE%B0stw"><span class="toc-number">4.6.1.5.</span> <span class="toc-text">重新标记 (STW)</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%B9%B6%E5%8F%91%E6%B8%85%E9%99%A4"><span class="toc-number">4.6.1.6.</span> <span class="toc-text">并发清除</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%B9%B6%E5%8F%91%E6%B8%85%E9%99%A4-2"><span class="toc-number">4.6.1.7.</span> <span class="toc-text">并发清除</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F-5"><span class="toc-number">4.6.2.</span> <span class="toc-text">使用方式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%97%AE%E9%A2%98"><span class="toc-number">4.6.3.</span> <span class="toc-text">问题</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#concurrent-model-failure"><span class="toc-number">4.6.3.1.</span> <span class="toc-text">Concurrent Model Failure</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#promotion-failed"><span class="toc-number">4.6.3.2.</span> <span class="toc-text">Promotion Failed</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BC%BA%E7%82%B9-4"><span class="toc-number">4.6.4.</span> <span class="toc-text">缺点</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#g1-%E6%94%B6%E9%9B%86%E5%99%A8"><span class="toc-number">4.7.</span> <span class="toc-text">G1 收集器</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8F%8F%E8%BF%B0-12"><span class="toc-number">4.7.1.</span> <span class="toc-text">描述</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96%E6%A0%87%E8%AE%B0stw-2"><span class="toc-number">4.7.1.1.</span> <span class="toc-text">初始化标记 (STW)</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%B9%B6%E5%8F%91%E6%A0%87%E8%AE%B0%E5%B9%B6%E5%8F%91"><span class="toc-number">4.7.1.2.</span> <span class="toc-text">并发标记 (并发)</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%9C%80%E7%BB%88%E6%A0%87%E8%AE%B0stw"><span class="toc-number">4.7.1.3.</span> <span class="toc-text">最终标记 (STW)</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%B8%85%E7%90%86stw"><span class="toc-number">4.7.1.4.</span> <span class="toc-text">清理 (STW)</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A8%A1%E5%BC%8F"><span class="toc-number">4.7.2.</span> <span class="toc-text">模式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F-6"><span class="toc-number">4.7.3.</span> <span class="toc-text">使用方式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BC%98%E7%82%B9-4"><span class="toc-number">4.7.4.</span> <span class="toc-text">优点</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BC%BA%E7%82%B9-5"><span class="toc-number">4.7.5.</span> <span class="toc-text">缺点</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-7"><span class="toc-number">4.7.6.</span> <span class="toc-text">总结</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%95%E7%94%A8-2"><span class="toc-number">5.</span> <span class="toc-text">引用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B7%A5%E5%85%B7"><span class="toc-number">6.</span> <span class="toc-text">工具</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B"><span class="toc-number">7.</span> <span class="toc-text">案例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E5%8F%82%E6%95%B0"><span class="toc-number">8.</span> <span class="toc-text">常用参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%87%E6%B3%A8"><span class="toc-number">9.</span> <span class="toc-text">标注</span></a></li></ol></div><div class="related panel pjax" data-title="Related"><ul><li><a href="/jvm-class-loader-mechanism/" rel="bookmark" title="JVM类加载机制">JVM类加载机制</a></li><li><a href="/jvm-running-data-area/" rel="bookmark" title="Jvm运行时数据区">Jvm运行时数据区</a></li><li class="active"><a href="/jvm-carbage-collect/" rel="bookmark" title="Jvm垃圾回收">Jvm垃圾回收</a></li><li><a href="/jvm-tools-instruct/" rel="bookmark" title="Java性能调优-指令(Java8)">Java性能调优-指令(Java8)</a></li></ul></div><div class="overview panel" data-title="Overview"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="冴羽　逸秋" data-src="/images/avatar.jpg"><p class="name" itemprop="name">冴羽　逸秋</p><div class="description" itemprop="description">欲を捨てて、今を生きる！</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">35</span> <span class="name">posts</span></a></div><div class="item categories"><a href="/categories/"><span class="count">21</span> <span class="name">categories</span></a></div><div class="item tags"><a href="/tags/"><span class="count">10</span> <span class="name">tags</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL3NtaWxlLWx4eQ==" title="https:&#x2F;&#x2F;github.com&#x2F;smile-lxy"><i class="ic i-github"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>Home</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>Posts</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>Archives</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>Categories</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>Tags</a></li></ul></li><li class="item"><a href="/friends/" rel="section"><i class="ic i-heart"></i>Friends</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/jvm-running-data-area/" rel="prev" title="Previous Post"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/jvm-tools-instruct/" rel="next" title="Next Post"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>Random Posts</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/%E6%97%A5%E6%9C%AC/" title="In 日本">日本</a> <i class="ic i-angle-right"></i> <a href="/categories/%E6%97%A5%E6%9C%AC/%E5%AD%A6%E4%B9%A0/" title="In 学习">学习</a> <i class="ic i-angle-right"></i> <a href="/categories/%E6%97%A5%E6%9C%AC/%E5%AD%A6%E4%B9%A0/%E6%97%A5%E8%AF%AD/" title="In 日语">日语</a></div><span><a href="/fukushi-keiyoudoushi/" title="学习-日语-形容动词">学习-日语-形容动词</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E6%97%A5%E6%9C%AC/" title="In 日本">日本</a> <i class="ic i-angle-right"></i> <a href="/categories/%E6%97%A5%E6%9C%AC/%E5%AD%A6%E4%B9%A0/" title="In 学习">学习</a> <i class="ic i-angle-right"></i> <a href="/categories/%E6%97%A5%E6%9C%AC/%E5%AD%A6%E4%B9%A0/%E6%97%A5%E8%AF%AD/" title="In 日语">日语</a></div><span><a href="/nihonngo-henkei/" title="学习-日语-日语动词变形总结">学习-日语-日语动词变形总结</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E6%97%A5%E6%9C%AC/" title="In 日本">日本</a> <i class="ic i-angle-right"></i> <a href="/categories/%E6%97%A5%E6%9C%AC/%E5%AD%A6%E4%B9%A0/" title="In 学习">学习</a> <i class="ic i-angle-right"></i> <a href="/categories/%E6%97%A5%E6%9C%AC/%E5%AD%A6%E4%B9%A0/%E6%97%A5%E8%AF%AD/" title="In 日语">日语</a></div><span><a href="/nihonngo-bunpou-matome/" title="学习-日语-语法总结">学习-日语-语法总结</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E6%97%A5%E6%9C%AC/" title="In 日本">日本</a> <i class="ic i-angle-right"></i> <a href="/categories/%E6%97%A5%E6%9C%AC/%E5%AD%A6%E4%B9%A0/" title="In 学习">学习</a> <i class="ic i-angle-right"></i> <a href="/categories/%E6%97%A5%E6%9C%AC/%E5%AD%A6%E4%B9%A0/%E6%97%A5%E8%AF%AD/" title="In 日语">日语</a></div><span><a href="/fukushi-rennzokushi/" title="学习-日语-连接词">学习-日语-连接词</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E6%97%A5%E6%9C%AC/" title="In 日本">日本</a> <i class="ic i-angle-right"></i> <a href="/categories/%E6%97%A5%E6%9C%AC/%E6%96%87%E7%AB%A0/" title="In 文章">文章</a> <i class="ic i-angle-right"></i> <a href="/categories/%E6%97%A5%E6%9C%AC/%E6%96%87%E7%AB%A0/%E6%97%A5%E8%AF%AD/" title="In 日语">日语</a></div><span><a href="/bunnsyou-deai-ja/" title="職業の指南人との出会い">職業の指南人との出会い</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E6%97%A5%E6%9C%AC/" title="In 日本">日本</a> <i class="ic i-angle-right"></i> <a href="/categories/%E6%97%A5%E6%9C%AC/%E5%AD%A6%E4%B9%A0/" title="In 学习">学习</a> <i class="ic i-angle-right"></i> <a href="/categories/%E6%97%A5%E6%9C%AC/%E5%AD%A6%E4%B9%A0/%E6%97%A5%E8%AF%AD/" title="In 日语">日语</a></div><span><a href="/fukushi-wagoshi-meishi/" title="学习-日语-和语词和名词">学习-日语-和语词和名词</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E6%97%A5%E6%9C%AC/" title="In 日本">日本</a> <i class="ic i-angle-right"></i> <a href="/categories/%E6%97%A5%E6%9C%AC/%E5%AD%A6%E4%B9%A0/" title="In 学习">学习</a> <i class="ic i-angle-right"></i> <a href="/categories/%E6%97%A5%E6%9C%AC/%E5%AD%A6%E4%B9%A0/%E6%97%A5%E8%AF%AD/" title="In 日语">日语</a></div><span><a href="/fukushi-tadoushi/" title="学习-日语-他动词">学习-日语-他动词</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E6%97%A5%E6%9C%AC/" title="In 日本">日本</a> <i class="ic i-angle-right"></i> <a href="/categories/%E6%97%A5%E6%9C%AC/%E5%AD%A6%E4%B9%A0/" title="In 学习">学习</a> <i class="ic i-angle-right"></i> <a href="/categories/%E6%97%A5%E6%9C%AC/%E5%AD%A6%E4%B9%A0/%E6%97%A5%E8%AF%AD/" title="In 日语">日语</a></div><span><a href="/nihonngo-bunpou-n1/" title="学习-日语-语法总结N1">学习-日语-语法总结N1</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E6%97%A5%E6%9C%AC/" title="In 日本">日本</a> <i class="ic i-angle-right"></i> <a href="/categories/%E6%97%A5%E6%9C%AC/%E5%AD%A6%E4%B9%A0/" title="In 学习">学习</a> <i class="ic i-angle-right"></i> <a href="/categories/%E6%97%A5%E6%9C%AC/%E5%AD%A6%E4%B9%A0/%E6%97%A5%E8%AF%AD/" title="In 日语">日语</a></div><span><a href="/fukushi-fukugoudoushi/" title="学习-日语-复合动词">学习-日语-复合动词</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/seikatsu/" title="In 生活">生活</a> <i class="ic i-angle-right"></i> <a href="/categories/seikatsu/%E7%BE%8E%E9%A3%9F/" title="In 美食">美食</a></div><span><a href="/egg-toon/" title="生活-美食-鸡蛋爆香椿">生活-美食-鸡蛋爆香椿</a></span></li></ul></div><div><h2>Recent Comments</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2020 – <span itemprop="copyrightYear">2024</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">冴羽　逸秋 @ 湖心小筑</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="Symbols count total">411k words</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="Reading time total">6:14</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"/jvm-carbage-collect/",favicon:{show:"（●´3｀●）Goooood",hide:"(´Д｀)Booooom"},search:{placeholder:"Search for Posts",empty:"We didn't find any results for the search: ${query}",stats:"${hits} results found in ${time} ms"},valine:!0,fancybox:!0,copyright:'Copied to clipboard successfully! <br> All articles in this blog are licensed under <i class="ic i-creative-commons"></i>BY-NC-SA.',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script></body></html>